# scoring_config.yaml — edit this to tune the scoring model

# --- Signal weights by type ---
# Each signal_type string (as extracted by fetchers) maps to a weight.
# Add new signal types here as we add sources.
signal_weights:
  # Code violations (source: code_violations)
  unfit_building: 10
  vacant_building: 10
  notice_of_violation: 10
  citation: 10
  complaint_construction: 5
  complaint_landlord_tenant: 5
  complaint_other: 3

  # Building permits (source: permits)
  expired_permit_major: 10    # estprojectcost > $50k
  expired_permit_minor: 5
  demolished: 5
  permit_cancelled: 3
  active_permit: -8             # negative — active permits suggest renovation
  completed_permit_recent: -6   # negative — recently completed work

  # Fire (source: fire_911)
  residential_fire: 10
  building_fire: 8

  # URM (source: urm)
  urm_high_risk_no_retrofit: 10
  urm_no_retrofit: 5
  urm_retrofitted: 2

  # KC enrichment (source: kc_enrichment)
  absentee_owner_out_of_state: 12
  absentee_owner_in_state: 6
  long_term_owner_20yr: 8
  long_term_owner_10yr: 5
  foreclosure: 15
  low_improvement_ratio: 4
  recently_sold: -15            # negative — recent sale suggests active ownership

# --- Bonuses ---
bonuses:
  multi_source_threshold: 2     # number of distinct sources to trigger bonus
  multi_source_points: 5

# --- Recency (decay curve) ---
recency:
  max_age_days: 1825            # 5 years — older signals excluded entirely
  decay_boost: 0.5              # at age 0: 1.5x, at max_age: 1.0x (linear)

  # Per-source overrides — tighter cutoffs or steeper curves for specific sources
  source_overrides:
    code_violations:
      max_age_days: 730         # 2 years — drop old violations entirely
      decay_boost: 1.0          # at age 0: 2.0x, at 2yr: 1.0x (strong recency premium)

# --- Status multipliers ---
# Per-source penalties for resolved/closed statuses.
# Signals with these statuses get their weight multiplied down.
status_multipliers:
  code_violations:
    closed: 0.2
    completed: 0.2
    compliance achieved: 0.3
    withdrawn: 0.1
    open duplicate: 0.1

# --- Tier thresholds ---
tiers:
  A: 15    # >= this score
  B: 8     # >= this score
  # below B = tier C
